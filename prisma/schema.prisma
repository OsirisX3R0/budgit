datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider   = "prisma-client-js"
  engineType = "binary"
}

model pay_schedule {
  id           Int           @id @default(autoincrement()) @db.Integer
  type         schedule_type
  amount       Decimal       @db.Money
  day_of_week  Int?
  day_of_month Int?
  next_occur   Int?
  first_date   Int?
  second_date  Int?
}

model biller {
  id             Int              @id @default(autoincrement()) @db.Integer
  name           String           @db.VarChar
  category       biller_category?
  day_of_month   String
  default_amount Int?
  payments       payment[]
}

model payday {
  id       Int       @id @default(autoincrement()) @db.Integer
  day      Int
  month    Int
  year     Int
  amount   Int
  payments payment[]
}

model payment {
  id        Int     @id @default(autoincrement()) @db.Integer
  month     Int
  year      Int
  amount    Decimal @db.Money
  biller_id Int
  payday_id Int
  biller    biller  @relation(fields: [biller_id], references: [id])
  payday    payday  @relation(fields: [payday_id], references: [id])
}

enum schedule_type {
  onetime
  weekly
  biweekly
  semimonthly
  monthly
}

enum biller_category {
  Electricity
  Water
  Gas
  Phone
  Internet
  Auto
}
